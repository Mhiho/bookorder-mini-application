(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{18:function(e,t,c){},51:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c.n(n),s=c(27),a=c.n(s),r=(c(51),c(16)),i=c(4),l=(c(18),c(29)),j=c(19),d=c(7),b=c(1),u=Object(b.jsx)(l.a,{icon:j.a}),h=Object(b.jsx)(l.a,{icon:j.b}),O=Object(b.jsx)(l.a,{icon:j.c});var k=function(e){var t=e.children,c=Object(d.c)((function(e){return e.selectedBooks})).selectedBooks,n=[{name:u,link:"/",alternative:null},{name:h,link:"/basket",alternative:"(".concat(c.length,")")},{name:O,link:"/order",alternative:null}];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("header",{children:Object(b.jsxs)("nav",{className:"nav",children:[Object(b.jsx)("div",{className:"layout-logo"}),Object(b.jsx)("ul",{className:"layout-ul",children:n.map((function(e,t){return Object(b.jsx)("li",{children:Object(b.jsxs)(r.b,{className:"layout-a",to:e.link,children:[e.name,e.alternative]})},"menuLink-".concat(t))}))})]})}),Object(b.jsx)("main",{children:Object(b.jsx)("div",{className:"layout-container",children:t})}),Object(b.jsx)("footer",{className:"",children:Object(b.jsxs)("span",{className:"layout-footer-span",children:["Autor aplikacji:"," ",Object(b.jsx)("a",{className:"layout-footer-a",href:"https://github.com/mhiho",children:Object(b.jsx)("strong",{children:"\xa0Micha\u0142 Pe\u0142ka\xa0"})}),"\xa9",(new Date).getFullYear()]})})]})},x=c(17),m=c(5),p=c.n(m),f=c(13),v=c(44),y=c.n(v).a.create({baseURL:"http://localhost:3001/api/"}),g="FETCH_REPOS",N="FETCH_FAILURE",z="CHOOSE_BOOK",B="REMOVE_BOOK";var w=function(e){return Object(b.jsx)("div",{className:"book-container",children:Object(b.jsxs)("div",{className:"book-item",children:[Object(b.jsx)("h3",{className:"book-item-title",children:e.title}),Object(b.jsx)("img",{src:e.cover,alt:"cover"}),Object(b.jsx)("h4",{className:"book-item-author",children:"Autor: ".concat(e.author)}),Object(b.jsxs)("h5",{className:"book-item-pageNr",children:["Liczba stron:"," ".concat(e.pageNr)]}),Object(b.jsx)("button",{onClick:e.onclick,children:"Dodaj do koszyka"})]})})};var _=function(){var e=Object(d.b)(),t=Object(n.useState)(0),c=Object(x.a)(t,2),o=c[0],s=c[1];Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.get("book/");case 3:c=e.sent,t({type:g,payload:c.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:N});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var a=Object(d.c)((function(e){return e.books.books&&e.books.books.data})),i=(Object(d.c)((function(e){return e.selectedBooks})).selectedBooks,Object(d.c)((function(e){return e})));return console.log(i),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"booklist-container",children:Object(b.jsx)(r.b,{to:"/basket",children:Object(b.jsx)("button",{className:"basket-forward",children:"Przejd\u017a do koszyka"})})}),a&&Object(b.jsx)(w,{className:"booklist-slide",title:a[o].title,cover:a[o].cover_url,author:a[o].author,pageNr:a[o].pages,onclick:function(){return e((t={id:a[o].id,quantity:1,book:a[o]},{type:z,payload:t}));var t}}),Object(b.jsxs)("div",{className:"booklist-arrows",children:[Object(b.jsx)("span",{className:"booklist-left",onClick:function(){s(o<=0?a.length-1:o-1)},children:"\u2190"}),Object(b.jsx)("span",{className:"booklist-right",onClick:function(){o>=a.length-1?s(0):s(o+1)},children:"\u2192"})]}),Object(b.jsx)("div",{className:"booklist-downpanel",children:a&&a.map((function(e,t){return Object(b.jsx)("img",{onClick:function(){return function(e){return s(e)}(t)},className:"booklist-downpanel-cover",src:e.cover_url,alt:"downpanel-cover"},"downpanel-".concat(e.id))}))})]})};var F=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(k,{children:Object(b.jsx)(_,{})})})};var C=function(){Object(d.c)((function(e){return e.books}));var e=Object(d.c)((function(e){return e.selectedBooks})),t=Object(d.b)();return Object(b.jsx)(k,{children:Object(b.jsxs)("div",{className:"basket-container",children:[e&&e.selectedBooks&&0===e.selectedBooks.length?null:Object(b.jsx)("div",{children:Object(b.jsx)(r.b,{to:"/order",children:Object(b.jsx)("button",{className:"basket-forward",children:"DALEJ"})})}),e&&e.selectedBooks&&0===e.selectedBooks.length?Object(b.jsxs)("div",{className:"basket-empty-container",children:[Object(b.jsx)("h1",{children:"Nie wybra\u0142e\u015b \u017cadnej ksi\u0105\u017cki"}),Object(b.jsx)("div",{className:"booklist-container",children:Object(b.jsx)(r.b,{to:"/",children:Object(b.jsx)("button",{children:"Powr\xf3t do sklepu"})})})]}):e&&e.selectedBooks&&e.selectedBooks.map((function(e){return Object(b.jsxs)("div",{className:"basket-one-book",children:[Object(b.jsx)("h2",{children:e.book.title}),Object(b.jsx)("img",{src:e.book.cover_url,alt:"ok\u0142adka-koszyk"}),Object(b.jsx)("button",{className:"basket-delete",onClick:function(){return t((c=e.id,{type:B,payload:c}));var c},children:"Usu\u0144 z koszyka"})]},"selected-books-".concat(e.id))}))]})})},E=c(46);var L=function(){var e=Object(d.c)((function(e){return e.selectedBooks})).selectedBooks.map((function(e){return{id:e.id,quantity:e.quantity}}));console.log(e);var t=Object(E.a)(),c=t.register,n=t.handleSubmit,o=t.errors;return Object(b.jsxs)("form",{onSubmit:n((function(t){y({method:"post",url:"/order",data:{order:e,first_name:t.first_name,last_name:t.last_name,city:t.city,zip_code:t.zip_code}})})),children:[Object(b.jsx)("label",{htmlFor:"first_name",children:"Imi\u0119"}),Object(b.jsx)("input",{name:"first_name",placeholder:"Wpisz imi\u0119",ref:c({validate:function(e){return e.length>3&&e.length<20}})}),o.first_name&&Object(b.jsx)("p",{children:"Imi\u0119 nie mo\u017ce by\u0107 kr\xf3tsze ni\u017c 3 i d\u0142u\u017csze ni\u017c 20 znak\xf3w."}),Object(b.jsx)("label",{htmlFor:"last_name",children:"Nazwisko"}),Object(b.jsx)("input",{name:"last_name",placeholder:"Wpisz nazwisko",ref:c({validate:function(e){return e.length>2&&e.length<20}})}),o.last_name&&Object(b.jsx)("p",{children:"Nazwisko nie mo\u017ce by\u0107 kr\xf3tsze ni\u017c 3 i d\u0142u\u017csze ni\u017c 20 znak\xf3w"}),Object(b.jsx)("label",{htmlFor:"city",children:"Miejscowo\u015b\u0107"}),Object(b.jsx)("input",{name:"city",placeholder:"Wpisz miejscowo\u015b\u0107",ref:c({validate:function(e){return e.length<20&&e.length>2}})}),o.city&&Object(b.jsx)("p",{children:"Miejscowo\u015b\u0107 nie mo\u017ce by\u0107 kt\xf3tsza ni\u017c 3 ani d\u0142u\u017csze ni\u017c 20 znak\xf3w"}),Object(b.jsx)("label",{htmlFor:"zip_code",children:"Kod pocztowy"}),Object(b.jsx)("input",{name:"zip_code",placeholder:"Wpisz kod pocztowy",ref:c({validate:function(e){return""!==e}})}),o.zip_code&&Object(b.jsx)("p",{children:"Wpisz kod pocztowy."}),Object(b.jsx)("input",{type:"submit",value:"ZAMAWIAM I P\u0141AC\u0118"})]})};var P=function(e){var t=Object(d.c)((function(e){return e.selectedBooks})),c=t&&0!==t.selectedBooks.length&&t.selectedBooks.map((function(e){return e.book.price})).reduce((function(e,t){return e+t}));return Object(b.jsx)(k,{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsx)("tr",{children:Object(b.jsx)("th",{children:"Lista zakupionych ksi\u0105\u017cek"})}),t&&t.selectedBooks&&t.selectedBooks.map((function(e,c){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.book.title}),Object(b.jsx)("td",{children:t&&0!==t.selectedBooks.length&&"".concat(e.book.price," PLN")})]})})),Object(b.jsx)("tr",{className:"order-line"}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Suma zakupionych ksi\u0105\u017cek"}),Object(b.jsx)("td",{children:t&&0!==t.selectedBooks.length&&"".concat(c," PLN")})]})]})}),Object(b.jsx)(L,{})]})})};var A=function(){return Object(b.jsxs)(r.a,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",component:F}),Object(b.jsx)(i.a,{exact:!0,path:"/basket",component:C}),Object(b.jsx)(i.a,{exact:!0,path:"/order",component:P})]})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,80)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;c(e),n(e),o(e),s(e),a(e)}))},I=c(21),M=c(45),W=c(15),D=c(6),R=(c(78),Object(I.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(W.a)(Object(W.a)({},e),{},{books:t.payload});case N:return Object(W.a)(Object(W.a)({},e),{},{books:[]});default:return e}},selectedBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedBooks:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(W.a)(Object(W.a)({},e),{},{selectedBooks:[].concat(Object(D.a)(e.selectedBooks),[t.payload])});case B:return Object(W.a)(Object(W.a)({},e),{},{selectedBooks:e.selectedBooks.filter((function(e){return e.id!==t.payload}))});default:return e}}}));var T=Object(I.d)(R,Object(I.a)(M.a));a.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(d.a,{store:T,children:Object(b.jsx)(A,{})})}),document.getElementById("root")),S()}},[[79,1,2]]]);
//# sourceMappingURL=main.50a7ee30.chunk.js.map